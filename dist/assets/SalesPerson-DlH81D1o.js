import{r as d,j as e,F as T,a6 as _,a as M,a7 as l,I as m,E as i,Q as N,a8 as O,a9 as W,N as D,aa as z,i as L}from"./index-DvAQHZBz.js";import{C as V,P as G}from"./CommonImage-CbDTdfkx.js";import{X}from"./index.es-Mzx9QTXI.js";import{T as $}from"./TableLoader-BrzTgT5J.js";import{A as q}from"./AddButton-BZFKBBds.js";import"./CustomTitle-Ba-iC58E.js";import"./index.esm-DKblCDgZ.js";import"./ModalPop-BlgZ6xNY.js";import"./styles-CPNO8nog.js";import"./dummy-profile-Cpwg2HeC.js";import"./SalesCreate-2W9T0Ud4.js";import"./FormControlLabel-GwBURcRQ.js";import"./createSvgIcon-CY8wNGfL.js";import"./Stack-D792XGEW.js";import"./index-Cqtmp151.js";const Q="_button_1pb78_1",J="_mainDiv_1pb78_21",K="_error_1pb78_35",o={button:Q,mainDiv:J,error:K};function Y({payload:b,id:f}){const[t,I]=d.useState(!1),[n,U]=d.useState({}),[p,S]=d.useState({bankdocumentImageUrl:null,panCardImageUrl:null,aadharFrontImageUrl:null,aadharBackImageUrl:null,profileImageUrl:null}),y=()=>{I(!t)};d.useEffect(()=>{(async()=>{var r;try{const a=await O(b,f);console.log("Single sale data-->",a),U(((r=a==null?void 0:a.data)==null?void 0:r.data)||{})}catch(a){console.error("Error fetching salon details:",a)}})()},[f]);const v=async(x,{setSubmitting:r})=>{try{const a=await W(x,n.userId);console.log("updateSaleDetails ->",a),D.success(a.data.message),I(!1)}catch(a){console.error("API error:",a),D.error(a.message)}finally{r(!1)}},u=(x,r)=>{U(a=>({...a,[x]:r})),S(a=>({...a,[x]:r}))};return e.jsxs("div",{className:o.mainDiv,children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h4",{children:"Sales Details"}),e.jsxs("div",{className:"d-flex justify-content-start align-items-center mb-3",children:[!t&&e.jsx("button",{type:"button",onClick:y,className:o.button,children:"Edit"}),t&&e.jsx("button",{type:"submit",form:"salesDetails",className:o.button,children:"Save"})]})]}),e.jsx(T,{initialValues:{phoneNumber:n.phoneNumber||"",countryCode:n.countryCode||"",firstName:n.firstName||"",middleName:n.middleName||"",lastName:n.lastName||"",dob:n.dob||"",gender:n.gender||"",email:n.email||"",accountNumber:n.accountNumber||"",accountHolderName:n.accountHolderName||"",bankName:n.bankName||"",ifscCode:n.ifscCode||"",address:n.address||"",bankdocumentImageUrl:n.bankdocumentImageUrl||"",panCardImageUrl:n.panCardImageUrl||"",aadharFrontImageUrl:n.aadharFrontImageUrl||"",aadharBackImageUrl:n.aadharBackImageUrl||"",profileImageUrl:n.profileImageUrl||"",upiID:n.upiID||" "},onSubmit:v,validationSchema:_,enableReinitialize:!0,children:({setFieldValue:x,handleChange:r,values:a,isSubmitting:g})=>e.jsxs(M,{id:"salesDetails",children:[e.jsxs(l,{container:!0,spacing:2,children:[e.jsxs(l,{item:!0,xs:4,children:[e.jsx(m,{label:"First Name",name:"firstName",type:"text",disabled:!t,onChange:r,value:a.firstName}),e.jsx(i,{name:"firstName",component:"div",className:o.error})]}),e.jsxs(l,{item:!0,xs:4,children:[e.jsx(m,{label:"Middle Name",name:"middleName",type:"text",disabled:!t,onChange:r,value:a.middleName}),e.jsx(i,{name:"middleName",component:"div",className:o.error})]}),e.jsxs(l,{item:!0,xs:4,children:[e.jsx(m,{label:"Last Name",name:"lastName",type:"text",disabled:!t,onChange:r,value:a.lastName}),e.jsx(i,{name:"lastName",component:"div",className:o.error})]}),e.jsxs(l,{item:!0,xs:4,children:[e.jsx(m,{label:"Email",name:"email",type:"email",disabled:!t,onChange:r,value:a.email}),e.jsx(i,{name:"email",component:"div",className:o.error})]}),e.jsxs(l,{item:!0,xs:4,children:[e.jsx(m,{label:"Phone Number",name:"phoneNumber",type:"text",disabled:!t,onChange:r,value:a.phoneNumber}),e.jsx(i,{name:"phoneNumber",component:"div",className:o.error})]}),e.jsxs(l,{item:!0,xs:4,children:[e.jsx(m,{label:"Country Code",name:"countryCode",type:"text",disabled:!t,onChange:r,value:a.countryCode}),e.jsx(i,{name:"countryCode",component:"div",className:o.error})]}),e.jsxs(l,{item:!0,xs:4,children:[e.jsx(m,{label:"DOB",name:"dob",type:"date",disabled:!t,onChange:r,value:a.dob,max:new Date().toISOString().split("T")[0]}),e.jsx(i,{name:"dob",component:"div",className:o.error})]}),e.jsx(l,{item:!0,xs:4,children:e.jsxs("div",{children:[e.jsxs(m,{label:"Gender",as:"select",name:"gender",className:"input",type:"text",disabled:!t,onChange:r,value:a.gender,children:[e.jsx("option",{value:"",children:"select"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Both"})]}),e.jsx("br",{}),e.jsx(i,{name:"gender",component:"div",className:o.error})]})})]}),e.jsx("hr",{}),e.jsx("h4",{className:"color-primary",children:"Bank Details"}),e.jsxs(l,{container:!0,spacing:2,children:[e.jsxs(l,{item:!0,xs:4,children:[e.jsx(m,{label:"Account Number",name:"accountNumber",disabled:!t,type:"text",onChange:r,value:a.accountNumber}),e.jsx(i,{name:"accountNumber",component:"div",className:o.error})]}),e.jsxs(l,{item:!0,xs:4,children:[e.jsx(m,{label:"Account Holder Name",name:"accountHolderName",disabled:!t,type:"text",onChange:r,value:a.accountHolderName}),e.jsx(i,{name:"accountHolderName",component:"div",className:o.error})]}),e.jsxs(l,{item:!0,xs:4,children:[e.jsx(m,{label:"Bank Name",name:"bankName",disabled:!t,type:"text",onChange:r,value:a.bankName}),e.jsx(i,{name:"bankName",component:"div",className:o.error})]}),e.jsxs(l,{item:!0,xs:4,children:[e.jsx(m,{label:"IFSC Code",name:"ifscCode",disabled:!t,type:"text",onChange:r,value:a.ifscCode}),e.jsx(i,{name:"ifscCode",component:"div",className:o.error})]}),e.jsxs(l,{item:!0,xs:4,children:[e.jsx(m,{label:"UPI Id",name:"upiID",disabled:!t,type:"text",onChange:r,value:a.upiID}),e.jsx(i,{name:"upiID",component:"div",className:o.error})]}),e.jsxs(l,{item:!0,xs:4,children:[e.jsx(m,{label:"Address",name:"address",disabled:!t,type:"text",onChange:r,value:a.address}),e.jsx(i,{name:"address",component:"div",className:o.error})]})]}),e.jsx("hr",{}),e.jsx("h4",{children:"Personal Attachments"}),e.jsxs(l,{container:!0,spacing:2,children:[e.jsxs(l,{item:!0,xs:4,children:[e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("label",{style:{fontWeight:500},children:"CancelCheque/Passbook"}),e.jsx("img",{src:p.bankdocumentImageUrl||a.bankdocumentImageUrl,alt:"No image",style:{height:"150px",width:"150px",marginBottom:"10px"}}),t&&e.jsx(N,{name:"bankdocumentImageUrl",buttonName:"Update",inputClassName:"form-control input",onImageUpload:c=>{console.log("Bank Document Image Path:",c),u("bankdocumentImageUrl",c)}})]}),e.jsx(i,{name:"bankdocumentImageUrl",component:"div",className:o.error})]}),e.jsxs(l,{item:!0,xs:4,children:[e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("label",{style:{fontWeight:500},children:"Pancard"}),e.jsx("img",{src:p.panCardImageUrl||a.panCardImageUrl,alt:"No image",style:{height:"150px",width:"150px",marginBottom:"10px"}}),t&&e.jsx(N,{name:"panCardImageUrl",buttonName:"Update",inputClassName:"form-control input",onImageUpload:c=>u("panCardImageUrl",c)})]}),e.jsx(i,{name:"panCardImageUrl",component:"div",className:o.error})]}),e.jsxs(l,{item:!0,xs:4,children:[e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("label",{style:{fontWeight:500},children:"Aadhar Front"}),e.jsx("img",{src:p.aadharFrontImageUrl||a.aadharFrontImageUrl,alt:"No image",style:{height:"150px",width:"150px",marginBottom:"10px"}}),t&&e.jsx(N,{name:"aadharFrontImageUrl",buttonName:"Update",inputClassName:"form-control input",onImageUpload:c=>u("aadharFrontImageUrl",c)})]}),e.jsx(i,{name:"aadharFrontImageUrl",component:"div",className:o.error})]}),e.jsxs(l,{item:!0,xs:4,children:[e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("label",{style:{fontWeight:500},children:"Aadhar Back"}),e.jsx("img",{src:p.aadharBackImageUrl||a.aadharBackImageUrl,alt:"No image",style:{height:"150px",width:"150px",marginBottom:"10px"}}),t&&e.jsx(N,{name:"aadharBackImageUrl",buttonName:"Update",inputClassName:"form-control input",onImageUpload:c=>u("aadharBackImageUrl",c)})]}),e.jsx(i,{name:"aadharBackImageUrl",component:"div",className:o.error})]}),e.jsxs(l,{item:!0,xs:4,children:[e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("label",{style:{fontWeight:500},children:"Profile Image"}),e.jsx("img",{src:p.profileImageUrl||a.profileImageUrl,alt:"No image",style:{height:"150px",width:"150px",marginBottom:"10px"}}),t&&e.jsx(N,{name:"profileImageUrl",buttonName:"Update",inputClassName:"form-control input",onImageUpload:c=>u("profileImageUrl",c)})]}),e.jsx(i,{name:"profileImageUrl",component:"div",className:o.error})]})]})]})})]})}const ue=()=>{const[b,f]=d.useState(null),[t,I]=d.useState(10),[n,U]=d.useState(0),[p,S]=d.useState([]),[y,v]=d.useState(1),[u,x]=d.useState(!1),[r,a]=d.useState("email"),[g,c]=d.useState(""),h=s=>{f(s)},F=s=>{v(s),C(s,t,g)},w=(s,k)=>{I(s),C(k,s,g)},C=async(s,k,P="")=>{let B={page:s,size:k};r&&P&&(B[r]=P);try{x(!0);const j=await z(B);console.log("Sales data -->",j);const H=j.data.data.items;S(H),U(j.data.data.total),x(!1)}catch(j){D.error(j.message),x(!1)}};d.useEffect(()=>{C(y,t,g)},[y,t,g]);const E=s=>{c(s),v(1),C(1,t,s)},R=[{name:"Name",selector:s=>s.name,sortable:!0,width:"300px",cell:s=>e.jsxs("div",{onClick:()=>h(s),className:"d-flex",children:[e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:L(s.profileImageUrl)?e.jsx(V,{imageUrl:s.profileImageUrl,alt:"Sales Image",classes:"sales-image"}):e.jsx("img",{src:G,alt:"Profile",style:{width:35,height:35,borderRadius:"50%"}})}),e.jsxs("div",{children:[e.jsx("div",{className:"ps-2",style:{fontWeight:"500"},children:`${s.firstName} ${s.lastName}`}),e.jsx("div",{className:"ps-2",style:{fontSize:"13px"},children:s.email})]})]})},{name:"Mobile Number",cell:s=>e.jsx("div",{onClick:()=>h(s),children:s.phoneNumber}),sortable:!0},{name:"City",cell:s=>e.jsx("div",{onClick:()=>h(s),children:s.address}),sortable:!0},{name:"UPI Id",cell:s=>e.jsx("div",{onClick:()=>h(s),children:s.upiID}),sortable:!0}],A={headCells:{style:{fontSize:"16px",textTransform:"uppercase"}},rows:{style:{fontSize:"16px",color:"#6F6B7D",fontFamily:"Poppins",cursor:"pointer"}}};return e.jsx(e.Fragment,{children:b?e.jsx(Y,{id:b.userId}):e.jsx("div",{className:"main-table rounded",children:e.jsx(X,{title:e.jsx(q,{buttonText:"Add Sales Person",setOption:a,searchByText:E,options:[{text:"Email",value:"email"},{text:"Mobile Number",value:"phoneNumber"}]}),columns:R,data:p,pagination:!0,paginationPerPage:t,paginationRowsPerPageOptions:[10,25,50],paginationServer:!0,paginationTotalRows:n,onChangePage:F,onChangeRowsPerPage:w,fixedHeader:!0,fixedHeaderScrollHeight:"450px",highlightOnHover:!0,onRowClicked:s=>h(s),progressPending:u,progressComponent:e.jsx($,{}),customStyles:A})})})};export{ue as default};
