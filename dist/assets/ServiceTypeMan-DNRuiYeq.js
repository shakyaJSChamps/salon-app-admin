import{r as n,j as e,P as S,J as j,F as b,K as E,a as U,I as w,E as f,Q as g,S as N,U as C,N as u,V as M,i as D,b as I,W as R,X as A,Y as T,q as B,C as h}from"./index-DvAQHZBz.js";import{B as F}from"./index.esm-zdE-Colu.js";import{X as P}from"./index.es-Mzx9QTXI.js";import{R as k}from"./index.esm-CtgEoWdf.js";import{c as z,f as V}from"./format-CU3NSzdY.js";import{P as H}from"./dummy-profile-Cpwg2HeC.js";import{C as v}from"./CommonImage-CbDTdfkx.js";const O=t=>{const[d,i]=n.useState({name:"",imageUrl:"",active:!0});n.useEffect(()=>{t.isEditMode&&t.selectedRowData?i({name:t.selectedRowData.name||"",imageUrl:t.selectedRowData.imageUrl||"",active:t.selectedRowData.active||!0}):i({name:"",imageUrl:"",active:!0})},[t.isEditMode,t.selectedRowData]);const x=async(c,{resetForm:l})=>{try{const r={...c};let s;t.isEditMode&&t.selectedRowData?(s=await N(r,t.selectedRowData.id),t.setServiceAdded(s.data.data)):(s=await C(r),t.setServiceAdded(s.data.data)),u.success(s.data.message),l(),i({name:"",imageUrl:"",active:!0}),t.isEditMode&&t.setIsEditMode(!1)}catch(r){u.error(r.message)}},m={padding:t.isEditMode?"1.5px 10px":"3px 20px",backgroundColor:"#000",border:"2px solid #909090",borderRadius:"12px",marginTop:t.isEditMode?"21px":"10px",fontSize:"11px",height:t.isEditMode?"48px":"300px",width:t.isEditMode?"290px":"295px"};return e.jsxs(S,{className:"add-service-paper px-3 h-100 rounded",elevation:3,children:[e.jsxs("div",{className:"d-flex align-items-center pt-2",children:[e.jsx(j,{}),e.jsxs("p",{className:"ps-1 fw-bold mb-0",children:[t.isEditMode?"Edit":"Add"," Service Type"]}),t.isEditMode&&e.jsx(F,{className:"cursor-pointer ms-auto",onClick:()=>t.setIsEditMode(!1)})]}),e.jsx("hr",{}),e.jsx(b,{enableReinitialize:!0,initialValues:d,onSubmit:x,validationSchema:E,children:({handleChange:c,values:l,setFieldValue:r})=>e.jsxs(U,{className:"d-flex flex-column",children:[e.jsxs("div",{className:"d-flex flex-column mb-2",children:[e.jsx(w,{name:"name",label:"Service Name",type:"text",value:l.name,onChange:c}),e.jsx(f,{name:"name",component:"div",style:{color:"red"}})]}),e.jsxs("div",{className:"d-flex flex-column align-items-center mb-2",children:[e.jsx("label",{style:{fontWeight:500},children:"Service Image"}),l.imageUrl?e.jsx("img",{src:l.imageUrl,alt:"Uploaded",style:{maxWidth:"100%",maxHeight:"300px"}}):e.jsx(g,{name:"imageUrl",buttonName:"Add Image",inputClassName:"form-control input",buttonStyle:m,onImageUpload:s=>{r("imageUrl",s)}}),t.isEditMode&&l.imageUrl&&e.jsx(g,{name:"imageUrl",buttonName:"Update Image",inputClassName:"form-control input",buttonStyle:m,onImageUpload:s=>{r("imageUrl",s)}}),e.jsx(f,{name:"imageUrl",component:"div",style:{color:"red"}})]}),e.jsx("div",{className:"d-flex justify-content-center pb-1",children:e.jsx("button",{type:"submit",className:"add-service-btn mt-2",children:t.isEditMode?"Update":"Add"})})]})})]})};function W({date:t,formatStr:d}){if(!t)return null;const i=new Date(t);return z(i,new Date("01-01-1970"))===0?null:V(i,d)}const X=t=>{const[d,i]=n.useState([]);n.useState(!1);const[x,m]=n.useState(null);n.useState("email");const c=async()=>{try{const o=(await M()).data.data;i(o),t.setServiceAdded(!1)}catch(a){u.error(a.message)}};n.useEffect(()=>{c()},[]),n.useEffect(()=>{t.serviceAdded&&c()},[t.serviceAdded]);const l=a=>{m(a),R.fire({title:"Are you sure?",text:"Once deleted, you will not be able to recover this salon type",icon:"warning",width:"30%",showCancelButton:!0,confirmButtonColor:"#000000",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:"custom-swal"}).then(o=>{o.isConfirmed&&r(a)})},r=async a=>{try{await A(a.id),u.success("Service type deleted successfully"),i(o=>o.filter(y=>y.id!==a.id))}catch(o){u.error(o.message)}},s=[{name:"Name",selector:a=>a.name,sortable:!0},{name:"Image",sortable:!0,cell:a=>e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:D(a.imageUrl)?e.jsx(v,{imageUrl:a.imageUrl,alt:"Service Image",classes:"service-image"}):e.jsx(v,{src:H,alt:"Profile",classes:"service-image"})})},{name:"Status",sortable:!0,cell:a=>a.active?"Active":"Inactive"},{name:"Created Date",sortable:!0,cell:a=>e.jsx(W,{date:a.createAt,formatStr:"dd/MM/yyyy"})},{name:"",cell:a=>e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"me-2 cursor-pointer",onClick:()=>t.onEdit(a)}),e.jsx(k,{className:"cursor-pointer",onClick:()=>l(a)})]})}],p={headCells:{style:{fontSize:"16px",textTransform:"uppercase"}},rows:{style:{fontSize:"16px",minHeight:"70px",color:"#6F6B7D",fontFamily:"Poppins"}}};return e.jsx(e.Fragment,{children:e.jsxs(S,{className:"add-service-paper  rounded h-100",elevation:3,children:[e.jsxs("div",{className:"d-flex align-items-center pt-2 ps-3",children:[e.jsx(j,{}),e.jsx("p",{className:"ps-1 fw-bold mb-0",children:"Service Type"})]}),e.jsx("hr",{}),d.length>0?e.jsx(P,{data:d,columns:s,customStyles:p,pagination:!0,highlightOnHover:!0}):e.jsx("span",{children:"No Data"})]})})},Z=t=>{const[d,i]=n.useState(!1),[x,m]=n.useState(null),[c,l]=n.useState(!1),r=s=>{m(s),l(!0)};return e.jsx(T,{children:e.jsxs(B,{children:[e.jsx(h,{md:4,children:e.jsx(O,{setServiceAdded:i,selectedRowData:x,isEditMode:c,setIsEditMode:l,onUpdateService:l})}),e.jsx(h,{md:8,children:e.jsx(X,{serviceAdded:d,setServiceAdded:i,onEdit:r})})]})})};export{Z as default};
